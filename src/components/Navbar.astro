---
// src/components/Navbar.astro
---
<nav id="main-nav" class="fixed top-6 left-0 w-full z-50 transition-all duration-500 ease-out animate-nav-enter">
    <div class="max-w-[1200px] mx-auto px-4">
        <div class="bg-black/80 backdrop-blur-xl rounded-full flex justify-between items-center px-10 py-3 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.7)] border border-white/5">
            
            <a href="/" class="flex gap-2 text-white text-xl md:text-2xl font-black uppercase tracking-[-0.05em] leading-none hover:text-[#00f0ff] transition-colors duration-300">
                <span>Aleksander</span>
                <span>Fijał</span>
            </a>

            <div class="hidden lg:flex gap-6 xl:gap-8 items-center font-mono text-[10px] uppercase tracking-[0.2em] text-zinc-500">
                <a href="/#portfolio" class="relative group hover:text-white transition-colors duration-300">
                    <span>Portfolio</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/koncerty" class="relative group hover:text-[#00f0ff] transition-colors duration-300">
                    <span>Koncerty</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/eventy" class="relative group hover:text-[#00f0ff] transition-colors duration-300">
                    <span>Eventy</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/portrety" class="relative group hover:text-[#00f0ff] transition-colors duration-300">
                    <span>Portrety</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/#analog" class="relative group hover:text-[#00f0ff] transition-colors duration-300">
                    <span>Analog</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
                <a href="/#aboutme" class="relative group hover:text-white transition-colors duration-300">
                    <span>O mnie</span>
                    <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-[#00f0ff] transition-all duration-300 group-hover:w-full"></span>
                </a>
            </div>
            
            <button id="menu-trigger" class="lg:hidden text-white font-mono text-[10px] tracking-widest uppercase outline-none">
                [ Menu ]
            </button>
        </div>
    </div>
</nav>

<div id="mobile-menu" class="fixed inset-0 z-[100] bg-black translate-y-[-100%] transition-transform duration-700 ease-[cubic-bezier(0.85,0,0.15,1)] flex flex-col justify-center px-10">
    <button id="menu-close" class="absolute top-10 right-10 text-white font-mono text-xs tracking-widest uppercase">
        [ Zamknij ]
    </button>

    <div class="flex flex-col gap-6">
        <span class="font-mono text-[#00f0ff] text-[10px] tracking-[0.5em] uppercase mb-4">Nawigacja</span>
        <a href="/#portfolio" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">Portfolio</a>
        <a href="/koncerty" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">Koncerty</a>
        <a href="/eventy" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">Eventy</a>
        <a href="/portrety" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">Portrety</a>
        <a href="/#analog" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">Analog</a>
        <a href="/#aboutme" class="mobile-link text-5xl font-black text-white uppercase tracking-tighter italic hover:text-[#00f0ff]">O mnie</a>
    </div>

    <div class="absolute bottom-12 left-10 right-10 flex justify-between items-end border-t border-white/10 pt-8">
        <div class="font-mono text-[10px] text-zinc-500 uppercase tracking-widest">
            Socials:<br/>
            <a href="https://www.facebook.com/profile.php?id=61587347632998" class="hover:text-white transition-colors">Facebook //</a>
            <a href="https://www.instagram.com/aleksanderfijal.photo/" class="hover:text-white transition-colors">Instagram //</a>
            <a href="https://www.instagram.com/aleksfijal.eventphotography/" class="hover:text-white transition-colors">Instagram - Fotogragia Koncertowa</a>
        </div>
        <div class="text-right font-mono text-[9px] text-zinc-700 uppercase">
            ©  {new Date().getFullYear()} - AF
        </div>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@900&family=JetBrains+Mono:wght@500;800&display=swap');

    a, .mobile-link { font-family: 'Inter', sans-serif; }
    .font-mono { font-family: 'JetBrains Mono', monospace; }

    #mobile-menu.active {
        transform: translateY(0);
    }

    /* Wyłączenie scrolla na body, gdy menu jest otwarte */
    :global(body.menu-open) {
        overflow: hidden;
    }

    :global(html), :global(body) {
        overflow-x: hidden;
    }

    @keyframes navEnter {
        from { transform: translateY(-100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .animate-nav-enter {
        animation: navEnter 1s cubic-bezier(0.16, 1, 0.3, 1) both;
        animation-delay: 0.2s;
    }
</style>

<script>
    const menuTrigger = document.getElementById('menu-trigger');
    const menuClose = document.getElementById('menu-close');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileLinks = document.querySelectorAll('.mobile-link');
    const nav = document.getElementById('main-nav');

    // Obsługa otwierania menu mobilnego
    menuTrigger?.addEventListener('click', () => {
        mobileMenu?.classList.add('active');
        // Zablokuj scrollowanie body gdy menu jest otwarte
        document.body.classList.add('menu-open');
    });

    // Funkcja zamykająca menu mobilne
    const closeMenu = () => {
        mobileMenu?.classList.remove('active');
        // Przywróć scrollowanie body
        document.body.classList.remove('menu-open');
    };

    // Podpięcie zamykania pod przycisk
    menuClose?.addEventListener('click', closeMenu);

    // Automatyczne zamykanie menu po kliknięciu w link nawigacyjny
    mobileLinks.forEach(link => {
        link.addEventListener('click', closeMenu);
    });

    // Logika ukrywania/pokazywania navbara podczas scrollowania
    let lastScrollY = window.scrollY;
    window.addEventListener('scroll', () => {
        // Nie ukrywaj navbara jeśli menu mobilne jest aktywne
        if (!nav || mobileMenu?.classList.contains('active')) return;
        const currentScrollY = window.scrollY;

        // Ukryj navbar przy scrollowaniu w dół (jeśli nie jesteśmy na samej górze)
        if (currentScrollY > lastScrollY && currentScrollY > 60) {
            nav.style.transform = 'translateY(-180%)';
        } else {
            // Pokaż navbar przy scrollowaniu w górę
            nav.style.transform = 'translateY(0)';
        }
        lastScrollY = currentScrollY;
    }, { passive: true });
</script>